/* --- 全体のスタイル --- */
html, body {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background-color: #f0f8ff;
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
}

/* --- プレイエリア --- */
#app {
    flex-grow: 1;
    position: relative;
    width: 100%;
}

/* --- お絵かきエリアのスタイル --- */
#drawing-container {
    flex-shrink: 0;
    background: #e9e9e9;
    border-top: 2px solid #ccc;
    padding: 10px 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

#drawingCanvas {
    border: 1px solid #333;
    background-color: #fff;
    cursor: crosshair;
    touch-action: none;
}

#controls button {
    font-size: 16px;
    padding: 8px 16px;
    margin: 0 5px;
    cursor: pointer;
    border-radius: 5px;
    border: 1px solid #888;
}

/* --- 生成されたアイテムのスタイル --- */
.user-item, .split-clone {
    position: absolute;
    width: 200px;
    height: 200px;
    cursor: grab;
    user-select: none;
    -webkit-mask-size: contain;
    mask-size: contain;
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    -webkit-mask-position: center;
    mask-position: center;
    transition: transform 0.2s ease-out, opacity 0.5s ease;
}

.dragging {
    cursor: grabbing;
    transform: scale(1.1);
    opacity: 0.8;
    z-index: 50;
}

/* --- エフェクトのスタイル --- */
.color-red { background-color: red !important; }
.color-blue { background-color: blue !important; }
.color-yellow { background-color: yellow !important; }
.color-green { background-color: green !important; }
.color-orange { background-color: orange !important; }
.color-pink { background-color: pink !important; }
.color-purple { background-color: purple !important; }
.color-cyan { background-color: cyan !important; }
.color-gold { background-color: gold !important; }

.rotate-cw { animation: rotate-cw 1s ease-in-out; }
@keyframes rotate-cw { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
.rotate-ccw { animation: rotate-ccw 1s ease-in-out; }
@keyframes rotate-ccw { from { transform: rotate(0deg); } to { transform: rotate(-360deg); } }
.spin-fast { animation: rotate-cw 0.5s linear 2; }
.rotate-y { animation: rotate-y 1s; }
@keyframes rotate-y { 50% { transform: rotateY(180deg); } 100% { transform: rotateY(360deg); } }
.rotate-x { animation: rotate-x 1s; }
@keyframes rotate-x { 50% { transform: rotateX(180deg); } 100% { transform: rotateX(360deg); } }
.rotate-180 { animation: rotate-180 1s ease-in-out; }
@keyframes rotate-180 { 50% { transform: rotate(180deg); } 100% { transform: rotate(0deg); } }
.bow { animation: bow 1.2s ease-in-out; }
@keyframes bow { 50% { transform: rotateX(60deg); } 100% { transform: rotateX(0deg); } }
.swing { animation: swing 1s ease-in-out; }
@keyframes swing { 20% { transform: rotate(15deg); } 40% { transform: rotate(-10deg); } 60% { transform: rotate(5deg); } 80% { transform: rotate(-5deg); } 100% { transform: rotate(0deg); } }
.scale-up-2 { animation: scale-up-2 1s ease-in-out; }
@keyframes scale-up-2 { 50% { transform: scale(2); } 100% { transform: scale(1); } }
.scale-up-1\.5 { animation: scale-up-1-5 1s ease-in-out; }
@keyframes scale-up-1-5 { 50% { transform: scale(1.5); } 100% { transform: scale(1); } }
.scale-down-0\.5 { animation: scale-down-0-5 1s ease-in-out; }
@keyframes scale-down-0-5 { 50% { transform: scale(0.5); } 100% { transform: scale(1); } }
.scale-down-0\.1 { animation: scale-down-0-1 1s ease-in-out; }
@keyframes scale-down-0-1 { 50% { transform: scale(0.1); } 100% { transform: scale(1); } }
.pulse { animation: pulse 0.8s ease-in-out; }
@keyframes pulse { 50% { transform: scale(1.2); } 100% { transform: scale(1); } }
.stretch-x { animation: stretch-x 1s ease-in-out; }
@keyframes stretch-x { 50% { transform: scaleX(2); } 100% { transform: scaleX(1); } }
.stretch-y { animation: stretch-y 1s ease-in-out; }
@keyframes stretch-y { 50% { transform: scaleY(2); } 100% { transform: scaleY(1); } }
.inflate { animation: inflate 1s ease-in-out; }
@keyframes inflate { 40% { transform: scale(1.2, 1.2); } 60% { transform: scale(0.9, 0.9); } 100% { transform: scale(1, 1); } }
.jump { animation: jump 0.8s ease-in-out; }
@keyframes jump { 50% { transform: translateY(-30px) scale(1.1); } 100% { transform: translateY(0); } }
.high-jump { animation: high-jump 1s ease-out; }
@keyframes high-jump { 50% { transform: translateY(-60px) scale(1.2); } 100% { transform: translateY(0); } }
.slide-right { animation: slide-right 1s ease-in-out; }
@keyframes slide-right { 50% { transform: translateX(40px); } 100% { transform: translateX(0); } }
.slide-left { animation: slide-left 1s ease-in-out; }
@keyframes slide-left { 50% { transform: translateX(-40px); } 100% { transform: translateX(0); } }
.draw-circle { animation: draw-circle 1.2s ease-in-out; }
@keyframes draw-circle { to { transform: rotate(360deg) translateX(20px) rotate(-360deg); } }
.bounce-down { animation: bounce-down 1s ease-out; }
@keyframes bounce-down { 20%, 50%, 80%, 100% { transform: translateY(0); } 40% { transform: translateY(30px); } 60% { transform: translateY(15px); } }
.float { animation: float-anim 2s ease-in-out infinite; }
@keyframes float-anim { 50% { transform: translateY(-20px); } }
.warp { animation: warp 0.8s ease-in-out; }
@keyframes warp { 40% { transform: scale(0.1); opacity: 0; } 60% { transform: translateX(30px) scale(0.1); opacity: 0; } 100% { transform: translateX(0) scale(1); opacity: 1; } }
.blink-3 { animation: blink-3 1s step-end 3; }
@keyframes blink-3 { 50% { opacity: 0; } }
.blink-slow { animation: blink-slow 1.5s ease-in-out; }
@keyframes blink-slow { 50% { opacity: 0.2; } 100% { opacity: 1; } }
.fade-out-in { animation: fade-out-in 1.2s ease-in-out; }
@keyframes fade-out-in { 50% { opacity: 0; } 100% { opacity: 1; } }
.outline { animation: outline 1s; }
@keyframes outline { 50% { background-color: transparent; border: 2px solid #333; } 100% { border: none; } }
.blur { animation: blur 1s; }
@keyframes blur { 50% { filter: blur(5px); } 100% { filter: blur(0); } }
.add-shadow { animation: add-shadow 1s; }
@keyframes add-shadow { 50% { filter: drop-shadow(5px 5px 5px #0008); } 100% { filter: none; } }
.sepia { animation: sepia 1s; }
@keyframes sepia { 50% { filter: sepia(1); } 100% { filter: none; } }
.grayscale { animation: grayscale 1s; }
@keyframes grayscale { 50% { filter: grayscale(1); } 100% { filter: none; } }
.color-rainbow { animation: color-rainbow 2s linear infinite; }
@keyframes color-rainbow { 0%{filter:hue-rotate(0deg)} 100%{filter:hue-rotate(360deg)} }

/* --- Special Effects --- */
.particle {
    position: absolute;
    width: 10px;
    height: 10px;
    pointer-events: none;
    z-index: 10;
    border-radius: 50%;
}
.particle.sparkle { background-color: gold; }
.particle.heart { 
    background-color: hotpink; 
    clip-path: polygon(50% 100%, 83% 75%, 100% 40%, 85% 10%, 50% 25%, 15% 10%, 0% 40%, 17% 75%);
}

@keyframes particle-anim {
    from { transform: scale(1); opacity: 1; }
    to { transform: scale(0) translate(var(--tx), var(--ty)); opacity: 0; }
}

.split-clone {
    pointer-events: none;
    opacity: 0.8;
    z-index: 9;
}

@keyframes split-anim {
    from { transform: translate(0, 0) scale(1); opacity: 0.8; }
    to { transform: translate(var(--tx), var(--ty)) scale(0.5); opacity: 0; }
}